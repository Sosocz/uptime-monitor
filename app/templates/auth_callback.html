<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion en cours | TrezApp</title>
    <meta name="robots" content="noindex,nofollow">
</head>
<body style="font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:#f9fafb;color:#111827;display:flex;align-items:center;justify-content:center;min-height:100vh;">
    <div style="text-align:center;">
        <h1 style="font-size:20px;margin-bottom:8px;">Connexion en cours...</h1>
        <p style="color:#6b7280;">Veuillez patienter.</p>
    </div>
    {% include "partials/supabase_scripts.html" %}
    <script>
        async function handleAuthCallback() {
            if (!window.supabaseClient) return;
            const { data } = await window.supabaseClient.auth.getSession();
            if (data && data.session && data.session.access_token) {
                localStorage.setItem('token', data.session.access_token);
                window.location.href = '/dashboard';
            } else {
                window.location.href = '/login';
            }
        }
        handleAuthCallback();
    </script>
</body>
</html>
